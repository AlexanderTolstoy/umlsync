<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <head>
  <title>{% block title %}{% endblock %} | EasyNav</title>
  <link rel="icon" type="image/png" href="{{MEDIA_URL}}static/images/easynav.png" />
  <link rel="stylesheet" type="text/css" href="{{MEDIA_URL}}static/css/common.css" />
<link href="static/diagrams/css/main.css" rel="stylesheet" type="text/css" id="skinSheetDiag">
<link href="static/css/pygments.css" rel="stylesheet" type="text/css" id="skinSheet">
<link rel="stylesheet" href="static/diagrams/js/3pp/simple-color-picker/jquery.simple-color-picker.css" type="text/css" media="screen"/>
<link rel="stylesheet" href="static/diagrams/css/jqsimplemenu.css" type="text/css" media="screen" />
<link rel="stylesheet" href="static/diagrams/css/simple_menu.css" type="text/css" media="screen" />

{% block css %}{% endblock %}
  <link href="{{MEDIA_URL}}static/diagrams/css/start/jquery-ui-1.8.17.custom.css" rel="stylesheet" type="text/css"/>
  <link rel="stylesheet" href="{{MEDIA_URL}}static/diagrams/css/main.css" type="text/css" media="screen"/>
  <link rel="stylesheet" href="{{MEDIA_URL}}static/js/tablesorter/themes/blue/style.css" type="text/css" media="screen"/>
  

<script src="{{MEDIA_URL}}static/diagrams/js/jquery.min.js"></script>
<script src="{{MEDIA_URL}}static/css/jquery-ui.js"></script>
<script src="{{MEDIA_URL}}static/js/tablesorter/jquery.metadata.js"></script>
<script src="{{MEDIA_URL}}static/js/tablesorter/jquery.tablesorter.js"></script>
<script type="text/javascript" src="static/diagrams/js/jqsimplemenu.js"></script>
<script src="static/diagrams/js/ui.selectmenu.js"></script>
<script type="text/javascript" src="static/diagrams/js/3pp/simple-color-picker/jquery.simple-color-picker.js"></script>
<script src="static/diagrams/js/3pp/jquery.tools.min.js"></script>
<script src="static/jquery.cookie.js" type="text/javascript"></script>

<script src="static/diagrams/js/3pp/dynatree/jquery.dynatree.js" type="text/javascript"></script>
<script src="static/diagrams/js/3pp/contextmenu/jquery.contextmenu.js"></script>
<script src="static/diagrams/js/3pp/jLog/jLog.min.js"></script>
<script src="static/diagrams/js/3pp/editable/editable.js"></script>
<script src="static/js/ui.tabs.closable.js"></script>

<script src="static/diagrams/dm/ds/diagram.js"></script>
<script src="static/diagrams/dm/dm/loader.js"></script>

  <script src="static/diagrams/dm/ds/diagram_view.js?next"></script>
  <script src="static/diagrams/dm/hs/menu.js"></script>
  <script src="static/diagrams/dm/ds/base.js"></script>
  <script src="static/diagrams/dm/ms/vp/vp.js"></script>
  <script src="static/diagrams/dm/cs/nested.js"></script>
  <script src="static/diagrams/dm/cs/aggregation.js"></script>
  <script src="static/diagrams/dm/cs/composition.js"></script>
  <script src="static/diagrams/dm/hs/framework.js"></script>
    <script src="static/diagrams/dm/hs/plain.js"></script>
  <script src="static/diagrams/dm/ms/ds/common.js"></script>
  <script src="static/diagrams/dm/ms/ctx/class.js?next"></script>
  <script src="static/diagrams/dm/es/class.js?next"></script>
  <script src="static/diagrams/dm/es/package.js?next"></script>
  <script src="static/diagrams/dm/es/component.js?next"></script>
  <script src="static/diagrams/dm/es/objinstance.js?next2"></script>

<script type="text/javascript"><!--

jQuery.ui.draggable.prototype._mouseStop = function (event) {
    var dropped = false;
    if ($.ui.ddmanager && !this.options.dropBehaviour) {
        dropped = $.ui.ddmanager.drop(this, event);
    }
    if (this.dropped) {
        dropped = this.dropped;
        this.dropped = false;
    }
    if (!this.element[0] || !this.element[0].parentNode) {
        return false;
    }
    if (this.options.revert == "invalid" && !dropped ||
        this.options.revert == "valid" && dropped ||
        this.options.revert === true ||
        $.isFunction(this.options.revert) &&
        this.options.revert.call(this.element, dropped)) {
        var self = this;

        $(this.helper).animate(this.originalPosition, {
                              duration:parseInt(this.options.revertDuration, 10), 
                              step: function() {self._trigger("reverting", event);},
                              complete:function () {if (self._trigger("stop", event) !== false) {self._clear();}}
                              });
    } else {
        if (this._trigger("stop", event) !== false) {
            this._clear();
        }
    }
    return false;
}

$(document).ready(function() {

$(document).ajaxSend(function(event, xhr, settings) {
    function getCookie(name) {
        var cookieValue = null;
        if (document.cookie && document.cookie != '') {
            var cookies = document.cookie.split(';');
            for (var i = 0; i < cookies.length; i++) {
                var cookie = jQuery.trim(cookies[i]);
                // Does this cookie string begin with the name we want?
                if (cookie.substring(0, name.length + 1) == (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }
    function sameOrigin(url) {
        // url could be relative or scheme relative or absolute
        var host = document.location.host; // host + port
        var protocol = document.location.protocol;
        var sr_origin = '//' + host;
        var origin = protocol + sr_origin;
        // Allow absolute or scheme relative URLs to same origin
        return (url == origin || url.slice(0, origin.length + 1) == origin + '/') ||
            (url == sr_origin || url.slice(0, sr_origin.length + 1) == sr_origin + '/') ||
            // or any other URL that isn't scheme relative or absolute i.e relative.
            !(/^(\/\/|http:|https:).*/.test(url));
    }
    function safeMethod(method) {
        return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
    }

    if (!safeMethod(settings.type) && sameOrigin(settings.url)) {
        xhr.setRequestHeader("X-CSRFToken", getCookie('csrftoken'));
    }
});

   var Loader = new dm.base.loader("http://localhost:8000/static/diagrams/");
   //var fw = new dm.hs.framework(Loader, {viewmanager: "http://localhost:8000/vm/"});
   var fw = new dm.hs.plain(Loader, {viewmanager: "http://localhost:8000/vm/"});
   	//fw.loadDiagram("http://localhost:8000/vm/cp/getdiagram?path=/platform/diagrams/paketos.umlsync&project=storageman");
    //fw.loadDiagram("http://localhost:8000/proxy/diagrams/packageDiagram.umlsync");
    fw.loadDiagram("http://localhost:8000/proxy/diagrams/packageDiagram2.umlsync");
   });
</script>

{% block scripts %}{% endblock %}

 </head>
 <body>
<div id="body">
  <div id="content">
  </div>
</div>

<!--- div id="socializethis" class="trashbox"> Some kind of clipboard with multiple selection. User could review code and find some instances and put them on this clipboard.
</div --->

{% block content-left %}{% endblock %}
{% block content-center %}{% endblock %}
{% block content-right %}{% endblock %}

<!--- input id="possition_locator" type="text" value="click a button" style="position:fixed;left:0px;top:0px;width:300px;"/ Position Locator instance. Check the rest of the code to be sute that it is not uses any longer --->

</body>
</html>
