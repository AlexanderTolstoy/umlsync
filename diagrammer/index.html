<!DOCTYPE html>
<html>
<head>
  
  <link href="js/jquery-ui.css" rel="stylesheet" type="text/css"/>
  <link rel="stylesheet" href="css/main.css" type="text/css" media="screen"/>

  <script src="js/jquery.min.js"></script>
  <script src="js/jquery-ui.js"></script>
  
  <script src="js/jquery.contextmenu.js"></script>
  <script src="js/3pp/jLog/jLog.min.js"></script>
  <script src="js/3pp/editable/editable.js"></script>

  <script src="dm/ds/diagram.js"></script>
  <script src="dm/dm/loader.js"></script>
  <script src="dm/hs/menu.js"></script>
  <script type="text/javascript" src="./dm/3pp/jquery.tools.min.js"></script>
  <script src="dm/ms/vp/vp.js"></script>
  <script src="dm/cs/nested.js"></script>
  <script src="dm/cs/aggregation.js"></script>
  <script src="dm/cs/composition.js"></script>
  <script src="dm/cs/transition.js"></script>
  <script src="dm/hs/tabbed.js"></script>
  <!-- script src="./dm/ms/ds/class.js"></script -->
  <!-- script src="http://api.jquery.com/scripts/events.js"></script -->
  
  <script>
  $(document).ready(function() {
  


/*

  $(document).ajaxSend(function(event, xhr, settings) {
    function getCookie(name) {
        var cookieValue = null;
        if (document.cookie && document.cookie != '') {
            var cookies = document.cookie.split(';');
            for (var i = 0; i < cookies.length; i++) {
                var cookie = jQuery.trim(cookies[i]);
                // Does this cookie string begin with the name we want?
                if (cookie.substring(0, name.length + 1) == (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }
    function sameOrigin(url) {
        // url could be relative or scheme relative or absolute
        var host = document.location.host; // host + port
        var protocol = document.location.protocol;
        var sr_origin = '//' + host;
        var origin = protocol + sr_origin;
        // Allow absolute or scheme relative URLs to same origin
        return (url == origin || url.slice(0, origin.length + 1) == origin + '/') ||
            (url == sr_origin || url.slice(0, sr_origin.length + 1) == sr_origin + '/') ||
            // or any other URL that isn't scheme relative or absolute i.e relative.
            !(/^(\/\/|http:|https:).* /.test(url));
    }
    function safeMethod(method) {
        return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
    }

    if (!safeMethod(settings.type) && sameOrigin(settings.url)) {
        xhr.setRequestHeader("X-CSRFToken", getCookie('csrftoken'));
    }
  });  
*/
    var Loader = new dm.base.loader("./");//file:///C:/Users/aea301/Desktop/VPSDE%20Project%20presentation/Web/JQuery/DIAGRAMMER/");
    var handler = new dm.hs.tabbed(Loader);
	var menu = new dm.ms.vp(handler);
	handler.loadDiagram(Loader.url + "/test/Project1/ComponentDiagram2.json");
	handler.loadDiagram(Loader.url + "/test/Project1/ClassDiagram2.json");
	handler.loadDiagram(Loader.url + "/test/Project1/ERDiagram.json");
	handler.loadDiagram(Loader.url + "/test/Project1/PackageDiagram.json");
  
/*
  		 $(window).bind( 'keypress', function(e) {
		       var mon = [99,118,120,121,122,115];
		       for (p in mon) {
			       if (mon[p] == e.charCode)
                     alert("KeyKode: which = " + e.which  + " keyCode=" + e.keyCode);
			   }
			   if (e.keyCode == 46) {
			        alert("HANDLE DELETE OPERATION");
			   } else {
			     switch (e.charCode) {
				     case 99: // Handle Ctl-C
					   // 1. Get focus manager
					   // 2. if element ? => copy it on clipboard
					   //                          stop propagate
					   break;
					 case 120:
					   // Handle Ctl-X
					   // 1. Get focus manager
					   // 2. if element ? => copy it on clipboard
					   //                          stop propagate
                       // 3. Remove element
  					   break;
					 case 118:// Handle Ctl-V
					   // 1. Get focus manager
					   // 2. if diagram ? => try copy element from clipboard
					   //                          stop propagate if success
					   break;
					 case 122:// Handle Ctl-Z
					   // 1. Get focus manager
					   // 2. if diagram => get operation sequence manager
					   //                       -> goBack()
					   break;
					 case 121:// Handle Ctl-Y
					   // 1. Get focus manager
					   // 2. if diagram => get operation sequence manager
					   //                       -> goForward()
					   break;
					 case 120:// Handle Ctl-S
                       // 1. Get focus manager
					   // 2. if diagram =>  Store the current diagram
					   //                       -> goBack()
					   break;
					 default:
					   break;
				 }
			   }
          } );
*/
	$("#socializethis").bind("mouseenter", function() {
		if ($(this).width() == "15") {
			$(this).data("position", $(this).position());
			$(this).stop().animate({width: "+=240px", opacity: "0.9"}).css("z-index", "100");
		}
	});

	$("#socializethis").bind("mouseleave", function() {
		$(this).stop();
		var width_shift = $(this).width() - 15;
		$(this).animate({width: "-="+ width_shift+ "px", opacity: "0.7"}).css("z-index", "1");
	});
  
    $("#tabs").tabs( {tabTemplate: '<li><a href="#{href}"><span>#{label}</span></a><span class="ui-test"><img src="images/delete.png"></img></span></li>'});

	$('#tabs span.ui-test').live('click', function() {
        var index = $('li',$("#tabs")).index($(this).parent());
        $("#tabs").tabs('remove', index);
    });
	
	$("#tab1").click(function() 
	{ 
      $.ajax( 
      { 
        url: "http://usync.org/fileopen/123", 
        cache: false, 
        success: function(message) 
        { 
		    alert(message);
            $("#tabcontent").empty().append(message); 
        } 
      }); 
    });	

	
    var index = 4;
	var diagram = undefined;

	
  });
  </script>
</head>
<body style="font-size:62.5%;background-color:grey;">
<div class="VPDiagramManager">
<div  class="vpdm-tabs">
<div id="tabs">
    <ul>
    </ul>
</div>
</div>
</div>

<div id="socializethis" class="trashbox">
</div>

<div id="socializethis2" class="trashbox2">
<img src="./images/VP.png" rel="#vp_main_menu" id="vp_main_menu_ref" style="border:0px; width:100%">
</div>

<input id="possition_locator" type="text" value="click a button" style="position:fixed;left:0px;top:0px;width:300px;"/>


</body>
</html>
