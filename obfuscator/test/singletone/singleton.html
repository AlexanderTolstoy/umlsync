<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>UML Framework: UMLSync</title>
  
<script>

dm = {ds:{},es:{},base:{}};

var f = 0;
function SingletonClass()  
{ 
    // demo variable 
    var names = []; 
    
    // instance of the singleton 
    this.singletonInstance = null; 
		for (i in this) 
		  console.log("THIS IS: " + i);

	f += 1;
	//console.log("INST: " + this.singletonInstance);    

    // Get the instance of the SingletonClass 
    // If there is no instance in this.singletonInstance, instanciate one 
    var getInstance = function() { 
        if (!dm.base.singletonInstance) { 
            // create a instance 
            dm.base.singletonInstance = createInstance(); 
        } 

        // return the instance of the singletonClass 
        return dm.base.singletonInstance; 
    } 
   
    console.log("INST: " + getInstance.prototype.singletonInstance);    
    // function for the creation of the SingletonClass class 
    var createInstance = function() { 
	    var bublik = "BBBB";
        // public methodes 
        return { 
            add : function(name) { 
                names.push(name); 
            }, 
            names : function() { 
				console.log("BUB:"+bublik);
                return names; 
            } 
        } 
    } 
 
    // wen constructed the getInstance is automaticly called and return the SingletonClass instance  
    return getInstance(); 
} 
 
var obj1 = new SingletonClass(); 
obj1.add("Jim"); 
console.log(obj1.names()); 
// prints: ["Jim"] 
 
var obj2 = new SingletonClass(); 
obj2.add("Ralph"); 
console.log(obj1.names()); 
// Ralph is added to the singleton instance and there for also acceseble by obj1 
// prints: ["Jim", "Ralph"] 
console.log(obj2.names()); 
// prints: ["Jim", "Ralph"] 
 
obj1.add("Bart"); 
console.log(obj2.names()); 
// prints: ["Jim", "Ralph", "Bart"] 

</script>
</head>
<body>
<h1>Test singleton</h1>
</body>
</html>
